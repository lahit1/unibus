#include <iostream>
#include <vector>

namespace unibus {

	namespace Radix {

		struct N { // Node
			virtual void call(std::istream in, std::ostream out) = 0;
		};

		class S : N { // Search Node
			std::unordered_map<char, N> targets;

			public:
			void call(std::istream in, std::ostream out) override;
			void add(N node);
		};

		class H : N { // Handler node
			void (*worker_func)(Req req, Res res);

			public:
			void call(std::istream in, std::ostream out) override;
		};

	}

}
