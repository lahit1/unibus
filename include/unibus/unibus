#include <iostream>
#include <memory>
#include <unibus/radixtrie>

namespace unibus {

class T : std::enable_shared_from_this<UniBus> {
	std::istream in;
	std::ostream out;
	T(); // hide

	Radix:S rad_root;

public:
	static std::shared_ptr<T> mk();
	static std::shared_ptr<T> mk(std::istream in, std::ostream out);

	std::shared_ptr<T> use(std::istream in);
	std::shared_ptr<T> use(std::ostream out);

	void handle(void (*worker_func)(Req req, Res res));
}

}
